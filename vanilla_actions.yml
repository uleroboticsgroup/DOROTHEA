---
version: 1.0
lab: vanilla
nodes: 3

# version = this file structure version
# lab = lab this configuration forms part of ['vanilla', 'hostile']
# nodes = number of nodes for this lab

# actions = each of the scripts or commands to be run on the nodes
#   name = name for the action
#   node = node in which to run the action
#   daemonized = if you want it to run blocking the node_daemon or in the background
#   payload = command/scrip to execute

actions:

  - name: Starting sshd in node_1
    node: 1
    daemonized: False
    payload: rc-service sshd restart

  - name: Starting sshd in node_2
    node: 2
    daemonized: False
    payload: rc-service sshd restart
  
  - name: Starting sshd in node_3
    node: 3
    daemonized: False
    payload: rc-service sshd restart

  - name: SSH conection node_2 to node_3
    node: 2
    daemonized: True
    payload: ssh.py dorothea-node_3 10 3
  
  - name: SSH conection node_3 to node_1
    node: 3
    daemonized: True
    payload: ssh.py dorothea-node_1 10 1

  - name: Mail daemon
    node: 2
    daemonized: True
    payload: mail.py

  - name: Curl inf5g segovia
    node: 1
    daemonized: False
    payload: curl http://www.inf5g.uva.es/ -o /dev/null

  - name: Bot jitmeet connections
    node: 1
    daemonized: True
    payload: botjitmeet.py

  - name: Pinging universidad Leon
    node: 1
    daemonized: False
    payload: ping -c 2 -q unileon.es

  - name: Surffing the web
    node: 1
    daemonized: True
    payload: surffing_web.py

  - name: Clonning DOROTHEA repo
    node: 1
    daemonized: False
    payload: git clone https://github.com/uleroboticsgroup/DOROTHEA /tmp/DOROTHEA

  - name: Running selenium_test
    node: 1
    daemonized: False
    payload: selenium_test.py

  - name: Testing node 2
    node: 2
    daemonized: False
    payload: echo "Hellow from node 2"

  - name: Ping to node 1 from 2
    node: 2
    daemonized: True
    payload: ping -c 45 dorothea-node_1

  - name: Ping to node 3 from 2
    node: 2
    daemonized: True
    payload: ping -c 45 dorothea-node_3

  - name: Testing node 3
    node: 3
    daemonized: False
    payload: echo "Hellow from node 3"

  - name: Ping to node 1 from 3
    node: 3
    daemonized: True
    payload: ping -c 45 dorothea-node_1

  - name: Ping to node 2 from 3
    node: 3
    daemonized: True
    payload: ping -c 45 dorothea-node_2

  